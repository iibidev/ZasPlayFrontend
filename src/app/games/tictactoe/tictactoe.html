@switch (gamePhase) {
    @case (0) {
        <div class="firstTurn">
            @if (currentTurn) {
                <div class="firstTurn__playerAnim">
                    <img class="firstTurn__image" [src]="currentTurn.profilePic">
                    <p class="firstTurn__username">{{ currentTurn.username }}</p>
                </div>
                <div class="firstTurn__pane">
                    @if (currentTurn._id == me?._id) {
                        <p class="pane__text">¡ES TU TURNO!</p>
                    }@else {
                        <p class="pane__text">¡QUÉ MALA SUERTE!</p>
                    }
                </div>
            }@else {
                <p class="firstTurn__title">El primer turno es para...</p>
                <img class="firstTurn__image" [src]="animationTurnPlayer.profilePic">
                <p class="firstTurn__username">{{ animationTurnPlayer.username }}</p>
            }
        </div>
    }

    @case (1) {
        <div class="game">
            <div class="game__turns">
                <div [classList]="is_myTurn ? 'turns__player currentTurn' : 'turns__player'">
                    <p class="player__name">{{ me?.username }}</p>
                    <span [classList]="`player__icon player__icon--${myIcon}`">{{ myIcon.toUpperCase() }}</span>
                </div>
                <div [classList]="is_myTurn ? 'turns__player' : 'turns__player currentTurn'">
                    <p class="player__name">{{ otherPlayer.username }}</p>
                    <span [classList]="`player__icon player__icon--${otherPlayersIcon}`">{{ otherPlayersIcon.toUpperCase() }}</span>
                </div>
            </div>
            <div class="game__grid">
                @for (icon of board; track $index) {
                    <div class="grid__position" (click)="makePlay($index)">
                        @if (icon === "x") {
                            <svg viewBox="0 0 100 100" class="icon-x">
                                <line x1="10" y1="10" x2="90" y2="90"/>
                                <line x1="90" y1="10" x2="10" y2="90"/>
                            </svg>
                        }@else if (icon === "o") {
                            <svg viewBox="0 0 100 100" class="icon-o">
                                <circle cx="50" cy="50" r="40"/>
                            </svg>
                        }
                    </div>
                }
            </div>
        </div>

        @if (gameFinished) {
            <div class="background">
                <div class="finishPane">
                    @if (finishStatus === "w") {
                        <p class="finishPane__title finishPane__title--win">¡Has ganado!</p>
                        <p class="finishPane__text">Partidas ganadas</p>
                        <div class="finishPane__gamesWon">
                            <p class="gamesWon__number">{{ myStats.gamesWon }}</p>
                            <span class="gamesWon__plus gamesWon__plus--win">+1</span>
                        </div>
                    }@else if (finishStatus === "l") {
                        <p class="finishPane__title finishPane__title--lost">¡Has perdido!</p>
                        <p class="finishPane__text">Partidas ganadas</p>
                        <div class="finishPane__gamesWon">
                            <p class="gamesWon__number">{{ myStats.gamesWon }}</p>
                            <span class="gamesWon__plus">+0</span>
                        </div>
                    }@else {
                        <p class="finishPane__title">¡Empate!</p>
                        <p class="finishPane__text">Partidas ganadas</p>
                        <div class="finishPane__gamesWon">
                            <p class="gamesWon__number">{{ myStats.gamesWon }}</p>
                            <span class="gamesWon__plus">+0</span>
                        </div>
                    }
                    
                    <p class="finishPane__back">Volviendo a la sala</p>
                    <app-loader2 [color]="'grey'"></app-loader2>
                </div>
            </div>
        }
    }
}
