@if (is_waiting()) {
    <div class="container">
        <h2 class="title">Sala de {{ room.players[0].user.username }}</h2>
        <div class="room">
            <div class="gameInfo__game gameInfo__game--mobile">
                <img class="game__icon" [src]="room.game.icon" [alt]="'Icono del juego ' + room.game.name">
                <h3 class="game__name">{{ room.game.name }}</h3>
            </div>
            <div class="room_players">
                <h3>Jugadores</h3>
                <p style="margin-top: 5px;">{{room.players.length + "/" + room.game.max}}</p>
                <div class="players__playerList">
                    @for (player of room.players; track $index) {
                        <div [classList]="player.user._id == userService.user()?._id ? 'playerList__player playerList__player--me' : 'playerList__player'">
                            <div class="player__info">
                                <img class="player__pic" [src]="player.user.profilePic" [alt]="'Foto de ' + player.user.username">
                                <p class="player__name">{{ player.user.username }}</p>
                            </div>
                            @if (player.host) {
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21.609 13.5616L21.8382 11.1263C22.0182 9.2137 22.1082 8.25739 21.781 7.86207C21.604 7.64823 21.3633 7.5172 21.106 7.4946C20.6303 7.45282 20.0329 8.1329 18.8381 9.49307C18.2202 10.1965 17.9113 10.5482 17.5666 10.6027C17.3757 10.6328 17.1811 10.6018 17.0047 10.5131C16.6865 10.3529 16.4743 9.91812 16.0499 9.04851L13.8131 4.46485C13.0112 2.82162 12.6102 2 12 2C11.3898 2 10.9888 2.82162 10.1869 4.46486L7.95007 9.04852C7.5257 9.91812 7.31351 10.3529 6.99526 10.5131C6.81892 10.6018 6.62434 10.6328 6.43337 10.6027C6.08872 10.5482 5.77977 10.1965 5.16187 9.49307C3.96708 8.1329 3.36968 7.45282 2.89399 7.4946C2.63666 7.5172 2.39598 7.64823 2.21899 7.86207C1.8918 8.25739 1.9818 9.2137 2.16181 11.1263L2.391 13.5616C2.76865 17.5742 2.95748 19.5805 4.14009 20.7902C5.32271 22 7.09517 22 10.6401 22H13.3599C16.9048 22 18.6773 22 19.8599 20.7902C21.0425 19.5805 21.2313 17.5742 21.609 13.5616Z" fill="#FFD700"/>
                                </svg>
                            }@else if (is_host) {
                                <svg (click)="kickOut(player.user._id)" style="cursor: pointer;" width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z" fill="red"/>
                                </svg>
                            }
                        </div>
                    }
                </div>
            </div>
            <div class="room__gameInfo">
                <div class="gameInfo__game">
                    <img class="game__icon" [src]="room.game.icon" [alt]="'Icono del juego ' + room.game.name">
                    <h3 class="game__name">{{ room.game.name }}</h3>
                </div>
                <div class="gameInfo__options">
                    @if (is_host) {
                        <button class="options__btn btn__start" [classList]="room.players.length < room.game.max ? 'options__btn btn__start disabled' : 'options__btn btn__start'" (click)="start()">Empezar</button>
                        <button [classList]="room.players.length >= room.game.max ? 'options__btn btn__invite disabled' : 'options__btn btn__invite'" (click)="showInvite = true">Invitar</button>
                    }
                    <button class="options__btn" (click)="exit()">Salir</button>
                </div>
            </div>
        </div>
    </div>
}@else {
    <ng-container #container></ng-container>
}

@if (showInvite) {
    <app-friend-list (cerrar)="showInvite = false" [mode]="2" [room]="room"></app-friend-list>
}